<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ruscord Chat</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-dark">
  <div class="app">
    <!-- Servers Sidebar -->
    <nav class="servers" id="servers-list">
      <div class="server-btn home-btn active" data-view="home" title="Главная">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
      </div>
      <div class="server-divider"></div>
      <div class="server-btn add-server" id="add-server-btn" title="Создать сервер">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
      </div>
      <div class="server-btn join-server" id="join-server-btn" title="Присоединиться">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
      </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-view home-view active" id="home-view">
        <div class="sidebar-header"><h2>Vortex</h2></div>
        <div class="sidebar-nav">
          <button class="nav-btn active" id="friends-btn">
            <svg viewBox="0 0 24 24"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
            Друзья
          </button>
        </div>
        <div class="sidebar-section">
          <div class="section-title">Личные сообщения</div>
          <div id="dm-list"></div>
        </div>
      </div>

      <div class="sidebar-view server-view" id="server-view">
        <div class="sidebar-header server-header">
          <h2 id="server-name">Сервер</h2>
          <button class="icon-btn" id="server-menu-btn">
            <svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
          </button>
        </div>
        <div class="sidebar-section">
          <div class="section-title">
            <span>Текстовые каналы</span>
            <button class="add-btn" id="add-channel-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></button>
          </div>
          <div id="channel-list"></div>
        </div>
        <div class="sidebar-section">
          <div class="section-title">
            <span>Голосовые каналы</span>
            <button class="add-btn" id="add-voice-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></button>
          </div>
          <div id="voice-list"></div>
        </div>
      </div>

      <!-- User Panel -->
      <div class="user-panel">
        <div class="user-avatar" id="user-avatar"></div>
        <div class="user-info">
          <div class="user-name" id="user-name">Гость</div>
          <div class="user-status" id="user-status">В сети</div>
        </div>
        <div class="user-controls">
          <button id="mic-toggle" title="Микрофон"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/></svg></button>
          <button id="sound-toggle" title="Звук"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3z"/></svg></button>
          <button id="settings-btn" title="Настройки"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg></button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- Friends View -->
      <div class="main-view active" id="friends-view">
        <div class="main-header">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3z"/></svg>
          <span>Друзья</span>
          <div class="tabs">
            <button class="tab active" data-tab="online">В сети</button>
            <button class="tab" data-tab="all">Все</button>
            <button class="tab accent" data-tab="add">Добавить</button>
          </div>
        </div>
        <div class="main-content">
          <div class="tab-content active" id="tab-online"><div id="online-users"></div></div>
          <div class="tab-content" id="tab-all"><div id="all-users"></div></div>
          <div class="tab-content" id="tab-add">
            <div class="add-form">
              <h3>Добавить в друзья</h3>
              <p>Найдите пользователя по имени</p>
              <div class="input-row">
                <input type="text" id="search-input" placeholder="Имя пользователя">
                <button class="btn primary" id="search-btn">Найти</button>
              </div>
              <div id="search-results"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Chat View -->
      <div class="main-view" id="chat-view">
        <div class="main-header">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M5.41 21L6.12 17H2V15H6.53L7.24 11H3V9H7.65L8.36 5H10.36L9.65 9H13.65L14.36 5H16.36L15.65 9H20V11H15.24L14.53 15H19V17H14.12L13.41 21H11.41L12.12 17H8.12L7.41 21H5.41Z"/></svg>
          <span id="channel-name">общий</span>
          <span class="typing" id="typing"></span>
        </div>
        <div class="messages" id="messages"></div>
        <div class="message-input">
          <button class="icon-btn" id="attach-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/></svg></button>
          <input type="file" id="file-input" hidden>
          <input type="text" id="msg-input" placeholder="Написать сообщение...">
          <button class="icon-btn" id="send-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button>
        </div>
      </div>

      <!-- DM View -->
      <div class="main-view" id="dm-view">
        <div class="main-header dm-header">
          <div class="dm-user">
            <div class="avatar small" id="dm-header-avatar"></div>
            <span id="dm-header-name">Пользователь</span>
          </div>
          <div class="dm-header-actions">
            <button class="icon-btn" title="Позвонить"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg></button>
            <button class="icon-btn" title="Видеозвонок"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg></button>
            <button class="icon-btn" title="Закрепить"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg></button>
            <button class="icon-btn" title="Добавить в группу"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></button>
            <div class="dm-search">
              <input type="text" placeholder="Искать" id="dm-search-input">
              <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
            </div>
          </div>
        </div>
        <div class="dm-content">
          <div class="dm-profile">
            <div class="dm-profile-avatar" id="dm-avatar"></div>
            <h2 class="dm-profile-name" id="dm-name">Пользователь</h2>
            <p class="dm-profile-username" id="dm-username">username</p>
            <p class="dm-profile-hint">Это начало истории ваших личных сообщений с <span id="dm-name-hint"></span>.</p>
            <div class="dm-profile-actions">
              <span class="dm-mutual">Нет общих серверов</span>
              <button class="btn primary small">Добавить в друзья</button>
              <button class="btn secondary small">Заблокировать</button>
            </div>
          </div>
          <div class="messages" id="dm-messages"></div>
        </div>
        <div class="message-input">
          <button class="icon-btn" id="dm-attach-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/></svg></button>
          <input type="file" id="dm-file-input" hidden>
          <input type="text" id="dm-input" placeholder="Написать сообщение...">
          <button class="icon-btn" id="dm-send-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button>
        </div>
      </div>

      <!-- Voice View -->
      <div class="main-view" id="voice-view">
        <div class="voice-room">
          <h2 id="voice-name">Голосовой канал</h2>
          <div class="voice-users" id="voice-users"></div>
          <div class="voice-controls">
            <button class="voice-btn" id="voice-mic"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/></svg></button>
            <button class="voice-btn danger" id="voice-leave"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.7l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/></svg></button>
          </div>
        </div>
      </div>
    </main>

    <!-- Members Panel -->
    <aside class="members" id="members-panel">
      <div class="section-title">В сети — <span id="online-count">0</span></div>
      <div id="members-online"></div>
      <div class="section-title">Не в сети — <span id="offline-count">0</span></div>
      <div id="members-offline"></div>
    </aside>
  </div>

  <!-- Context Menu -->
  <div class="context-menu" id="server-context">
    <button data-action="invite"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>Пригласить</button>
    <button data-action="settings"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58z"/></svg>Настройки</button>
    <div class="divider"></div>
    <button data-action="leave" class="danger"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>Покинуть</button>
  </div>

  <!-- Modals -->
  <div class="modal" id="auth-modal">
    <div class="modal-box">
      <div class="modal-tabs">
        <button class="modal-tab active" data-tab="login">Вход</button>
        <button class="modal-tab" data-tab="register">Регистрация</button>
      </div>
      <div class="modal-content">
        <div class="auth-tab active" id="auth-login">
          <div class="form-group"><label>Email</label><input type="email" id="login-email"></div>
          <div class="form-group"><label>Пароль</label><input type="password" id="login-pass"></div>
          <button class="btn primary full" id="login-btn">Войти</button>
        </div>
        <div class="auth-tab" id="auth-register">
          <div class="form-group"><label>Имя</label><input type="text" id="reg-name"></div>
          <div class="form-group"><label>Email</label><input type="email" id="reg-email"></div>
          <div class="form-group"><label>Пароль</label><input type="password" id="reg-pass"></div>
          <button class="btn primary full" id="reg-btn">Создать аккаунт</button>
        </div>
        <p class="error" id="auth-error"></p>
      </div>
    </div>
  </div>

  <div class="modal" id="settings-modal">
    <div class="modal-box large">
      <div class="modal-header"><h2>Настройки</h2><button class="close-btn" data-close>&times;</button></div>
      <div class="settings-layout">
        <div class="settings-nav">
          <button class="settings-tab active" data-settings="profile">Профиль</button>
          <button class="settings-tab" data-settings="audio">Голос и видео</button>
          <button class="settings-tab" data-settings="appearance">Внешний вид</button>
        </div>
        <div class="settings-content">
          <div class="settings-panel active" id="settings-profile">
            <h3>Профиль</h3>
            <div class="avatar-edit">
              <div class="avatar large" id="settings-avatar"></div>
              <div class="avatar-actions">
                <button class="btn" id="upload-avatar">Загрузить</button>
                <button class="btn secondary" id="remove-avatar">Удалить</button>
              </div>
              <input type="file" id="avatar-input" accept="image/*" hidden>
            </div>
            <div class="form-group"><label>Имя пользователя</label><input type="text" id="settings-name"></div>
            <div class="form-group">
              <label>Статус</label>
              <select id="settings-status">
                <option value="online">В сети</option>
                <option value="idle">Не активен</option>
                <option value="dnd">Не беспокоить</option>
                <option value="invisible">Невидимый</option>
              </select>
            </div>
            <button class="btn primary" id="save-profile">Сохранить</button>
          </div>
          <div class="settings-panel" id="settings-audio">
            <h3>Голос и видео</h3>
            <div class="form-group"><label>Устройство ввода</label><select id="mic-select"></select></div>
            <div class="form-group"><label>Устройство вывода</label><select id="speaker-select"></select></div>
            <div class="form-group">
              <label>Громкость микрофона</label>
              <input type="range" id="mic-volume" min="0" max="100" value="100">
            </div>
            <button class="btn primary" id="save-audio">Сохранить</button>
          </div>
          <div class="settings-panel" id="settings-appearance">
            <h3>Внешний вид</h3>
            <div class="theme-options">
              <button class="theme-btn active" data-theme="dark">Тёмная</button>
              <button class="theme-btn" data-theme="light">Светлая</button>
              <button class="theme-btn" data-theme="amoled">AMOLED</button>
              <button class="theme-btn" data-theme="midnight">Полночь</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="create-server-modal">
    <div class="modal-box">
      <div class="modal-header"><h2>Создать сервер</h2><button class="close-btn" data-close>&times;</button></div>
      <div class="modal-content">
        <div class="avatar-edit center">
          <div class="avatar large" id="new-server-icon"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></div>
          <button class="btn" id="upload-server-icon">Загрузить иконку</button>
          <input type="file" id="server-icon-input" accept="image/*" hidden>
        </div>
        <div class="form-group"><label>Название сервера</label><input type="text" id="new-server-name" placeholder="Мой сервер"></div>
        <button class="btn primary full" id="create-server-btn">Создать</button>
      </div>
    </div>
  </div>

  <div class="modal" id="join-modal">
    <div class="modal-box">
      <div class="modal-header"><h2>Присоединиться</h2><button class="close-btn" data-close>&times;</button></div>
      <div class="modal-content">
        <div class="form-group"><label>Код приглашения</label><input type="text" id="invite-code" placeholder="Введите код"></div>
        <button class="btn primary full" id="use-invite-btn">Присоединиться</button>
        <p class="error" id="invite-error"></p>
      </div>
    </div>
  </div>

  <div class="modal" id="invite-modal">
    <div class="modal-box">
      <div class="modal-header"><h2>Пригласить</h2><button class="close-btn" data-close>&times;</button></div>
      <div class="modal-content">
        <p>Отправьте этот код другу:</p>
        <div class="invite-code-box">
          <input type="text" id="invite-code-display" readonly>
          <button class="btn" id="copy-invite">Копировать</button>
        </div>
        <div class="form-group"><label>Или выберите пользователя</label></div>
        <div id="invite-users"></div>
      </div>
    </div>
  </div>

  <div class="modal" id="server-settings-modal">
    <div class="modal-box">
      <div class="modal-header"><h2>Настройки сервера</h2><button class="close-btn" data-close>&times;</button></div>
      <div class="modal-content">
        <div class="avatar-edit center">
          <div class="avatar large" id="edit-server-icon"></div>
          <button class="btn" id="edit-server-icon-btn">Изменить</button>
          <input type="file" id="edit-icon-input" accept="image/*" hidden>
        </div>
        <div class="form-group"><label>Название</label><input type="text" id="edit-server-name"></div>
        <button class="btn primary full" id="save-server-btn">Сохранить</button>
      </div>
    </div>
  </div>

  <div class="modal" id="channel-modal">
    <div class="modal-box">
      <div class="modal-header"><h2>Создать канал</h2><button class="close-btn" data-close>&times;</button></div>
      <div class="modal-content">
        <div class="form-group"><label>Название канала</label><input type="text" id="new-channel-name" placeholder="новый-канал"></div>
        <button class="btn primary full" id="create-channel-btn">Создать</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>